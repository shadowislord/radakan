Import( "env", "dev", "mode")
localenv = env.Copy()

project = "ogreode"

#~ if we are on windows we need to tell gcc to bild a windows exe
#~ we need to set -mwindows as a compiler flag
import sys
if sys.platform == "win32":
    localenv.Tool( "mingw" )
    localenv[ "CCFLAGS" ] += [ "-mwindows" ]

localenv.Append(
                CPPPATH = [
                            "#external/ogreaddons/ogreode/include",
                            "#external/ogreaddons/ogreode/loader/include",
                            "#external/ogreaddons/ogreode/prefab/include",
                            "#external/ogreaddons/ogreode/tinyxml",
                            "/usr/include/ode",
                            "/home/t/opt/ogre-1.2/OgreMain/include"
                        ],
                LIBPATH = [ "/home/t/opt/ogre-1.2/OgreMain/lib" ],
                LIBS    = [  "OgreMain" ]
            )

name = project
if mode == "debug":
    name += "_d"

files = dev.DevGetSourceFiles( "src", [ "*.cpp" ] )
files += dev.DevGetSourceFiles( "loader/src", [ "*.cpp" ]  )
files += dev.DevGetSourceFiles( "prefab/src", [ "*.cpp" ]  )
files += dev.DevGetSourceFiles( "tinyxml", [ "*.cpp" ]  )

tgt = localenv.StaticLibrary( name, files )

localenv.Alias(project, tgt)
